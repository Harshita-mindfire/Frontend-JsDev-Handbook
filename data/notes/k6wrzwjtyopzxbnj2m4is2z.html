<h1 id="redux">Redux<a aria-hidden="true" class="anchor-heading icon-link" href="#redux"></a></h1>
<h2 id="redux-1">Redux<a aria-hidden="true" class="anchor-heading icon-link" href="#redux-1"></a></h2>
<ul>
<li>predictable state container for js apps.</li>
<li>predictable because in redux, a pattern is enforced to ensure all transitions are explicit and can be tracked.</li>
</ul>
<p><img src="/Frontend-JsDev-Handbook/assets/images/2023-08-22-22-28-35.png"></p>
<p><img src="/Frontend-JsDev-Handbook/assets/images/2023-08-22-22-29-07.png"></p>
<h2 id="three-core-concepts">Three core concepts<a aria-hidden="true" class="anchor-heading icon-link" href="#three-core-concepts"></a></h2>
<ul>
<li>store</li>
<li>action: js object that has a type and payload property. The type value is usually defined as constants.</li>
<li>reducer</li>
</ul>
<p><img src="/Frontend-JsDev-Handbook/assets/images/2023-08-22-22-37-23.png"></p>
<p><img src="/Frontend-JsDev-Handbook/assets/images/2023-08-22-22-44-19.png"></p>
<h2 id="principles">Principles<a aria-hidden="true" class="anchor-heading icon-link" href="#principles"></a></h2>
<ol>
<li>
<p><img src="/Frontend-JsDev-Handbook/assets/images/2023-08-22-22-39-33.png"></p>
</li>
<li>
<p><img src="/Frontend-JsDev-Handbook/assets/images/2023-08-22-22-41-03.png"></p>
<p>The state is read only and the only way to change the state is dispatch an action</p>
</li>
<li>
<p><img src="/Frontend-JsDev-Handbook/assets/images/2023-08-22-22-43-13.png"></p>
</li>
</ol>
<h2 id="redux-store">Redux store<a aria-hidden="true" class="anchor-heading icon-link" href="#redux-store"></a></h2>
<p><img src="/Frontend-JsDev-Handbook/assets/images/2023-08-23-07-16-10.png"></p>
<p>imp methods</p>
<ul>
<li>createStore</li>
<li>bindActionCreators</li>
<li>combineReducers</li>
</ul>
<h3 id="example">Example<a aria-hidden="true" class="anchor-heading icon-link" href="#example"></a></h3>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> redux <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'redux'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> createStore <span class="token operator">=</span> redux<span class="token punctuation">.</span><span class="token property-access">createStore</span><span class="token punctuation">;</span>

<span class="token comment">//action types</span>
<span class="token keyword">const</span> <span class="token constant">CAKE_ORDERED</span> <span class="token operator">=</span> <span class="token string">'CAKE_ORDERED'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">CAKE_RESTOCK</span> <span class="token operator">=</span> <span class="token string">'CAKE_RESTOCK'</span><span class="token punctuation">;</span>

<span class="token comment">//action  creators</span>
<span class="token keyword">function</span> <span class="token function">orderCake</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">CAKE_ORDERED</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">restockCake</span><span class="token punctuation">(</span><span class="token parameter">qty <span class="token operator">=</span> <span class="token number">1</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">CAKE_RESTOCK</span><span class="token punctuation">,</span>
    <span class="token literal-property property">payload</span><span class="token operator">:</span> qty<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// init state</span>
<span class="token keyword">const</span> initState <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">noOfCakes</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//reducer</span>
<span class="token keyword">const</span> <span class="token function-variable function">reducer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> initState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token constant">CAKE_ORDERED</span><span class="token operator">:</span>
      <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
        <span class="token spread operator">...</span>state<span class="token punctuation">,</span>
        <span class="token literal-property property">noOfCakes</span><span class="token operator">:</span> state<span class="token punctuation">.</span><span class="token property-access">noOfCakes</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token constant">CAKE_RESTOCK</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
        <span class="token spread operator">...</span>state<span class="token punctuation">,</span>
        <span class="token literal-property property">noOfCakes</span><span class="token operator">:</span> state<span class="token punctuation">.</span><span class="token property-access">noOfCakes</span> <span class="token operator">+</span> action<span class="token punctuation">.</span><span class="token property-access">payload</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword module">default</span><span class="token operator">:</span>
      <span class="token keyword control-flow">return</span> state<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//state</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>reducer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'Initial State'</span><span class="token punctuation">,</span> store<span class="token punctuation">.</span><span class="token method function property-access">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> unsubscribe <span class="token operator">=</span> store<span class="token punctuation">.</span><span class="token method function property-access">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'Update State'</span><span class="token punctuation">,</span> store<span class="token punctuation">.</span><span class="token method function property-access">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

store<span class="token punctuation">.</span><span class="token method function property-access">dispatch</span><span class="token punctuation">(</span><span class="token function">orderCake</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
store<span class="token punctuation">.</span><span class="token method function property-access">dispatch</span><span class="token punctuation">(</span><span class="token function">orderCake</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
store<span class="token punctuation">.</span><span class="token method function property-access">dispatch</span><span class="token punctuation">(</span><span class="token function">restockCake</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="bindactioncreators">bindActionCreators<a aria-hidden="true" class="anchor-heading icon-link" href="#bindactioncreators"></a></h3>
<ul>
<li><code>bindActionCreators</code> : a helper method that turns an object whose values are action creators, into an object with the same keys, but with every function wrapped into a dispatch call so they may be invoked directly.</li>
</ul>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> actions <span class="token operator">=</span> redux<span class="token punctuation">.</span><span class="token method function property-access">bindActionCreators</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span> orderCake<span class="token punctuation">,</span> restockCake <span class="token punctuation">}</span><span class="token punctuation">,</span>
  store<span class="token punctuation">.</span><span class="token property-access">dispatch</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
actions<span class="token punctuation">.</span><span class="token method function property-access">orderCake</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
actions<span class="token punctuation">.</span><span class="token method function property-access">restockCake</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="combine-reducers">Combine Reducers<a aria-hidden="true" class="anchor-heading icon-link" href="#combine-reducers"></a></h3>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> rootReducer <span class="token operator">=</span> redux<span class="token punctuation">.</span><span class="token method function property-access">combineReducers</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">cake</span><span class="token operator">:</span> cakeReducer<span class="token punctuation">,</span>
  <span class="token literal-property property">iceCream</span><span class="token operator">:</span> iceCreamReducer<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> redux<span class="token punctuation">.</span><span class="token method function property-access">createStore</span><span class="token punctuation">(</span>rootReducer<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="apply-middleware">Apply Middleware<a aria-hidden="true" class="anchor-heading icon-link" href="#apply-middleware"></a></h3>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> reduxLogger <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'redux-logger'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> logger <span class="token operator">=</span> reduxLogger<span class="token punctuation">.</span><span class="token method function property-access">createLogger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> redux<span class="token punctuation">.</span><span class="token method function property-access">createStore</span><span class="token punctuation">(</span>rootReducer<span class="token punctuation">,</span> <span class="token function">applyMiddleware</span><span class="token punctuation">(</span>logger<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="redux-thunk">Redux Thunk<a aria-hidden="true" class="anchor-heading icon-link" href="#redux-thunk"></a></h3>
<p><a href="/Frontend-JsDev-Handbook/notes/s6qvndijnh01d8cuioxy7zw">Thunk</a></p>
<hr>
<strong>Children</strong>
<ol>
<li><a href="/Frontend-JsDev-Handbook/notes/d9pyzgwyw5glbwl05lihia3">Misc</a></li>
<li><a href="/Frontend-JsDev-Handbook/notes/og4aiuuxxnjh56eqvh6tdvl">React Redux</a></li>
<li><a href="/Frontend-JsDev-Handbook/notes/gterdib2mf9tclbgxb07mjd">Redux Toolkit</a></li>
<li><a href="/Frontend-JsDev-Handbook/notes/s6qvndijnh01d8cuioxy7zw">Thunk</a></li>
</ol>