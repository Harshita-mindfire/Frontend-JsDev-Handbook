<h1 id="metadata">Metadata<a aria-hidden="true" class="anchor-heading icon-link" href="#metadata"></a></h1>
<h1 id="routing-metadata">Routing metadata<a aria-hidden="true" class="anchor-heading icon-link" href="#routing-metadata"></a></h1>
<ul>
<li>
<p>metadata api is powerful feature that lets us define metadata for each page(good for SEO)</p>
</li>
<li>
<p>2 ways to handle metadata in layout.tsx or page.tsx files.</p>
<ul>
<li>static metadata object</li>
<li>dynamic generateMetadata function</li>
</ul>
<h2 id="configuring-metadata">Configuring metadata<a aria-hidden="true" class="anchor-heading icon-link" href="#configuring-metadata"></a></h2>
<p><strong>metadata rules</strong></p>
<ul>
<li>both layout, page.tsx can export metadata. Layout metadata applies to all its pages, while page metadata is applied tp that page.</li>
<li>metadata follows top-down order. starting from root level.</li>
<li>they merge together if metadata exists in multiple pages. For matching properties the page metadata overrides layout metadata.</li>
<li>does not work with client components(that have use-client directive). To handle metadata in client components, separate the logic that requires client component as a separate component and import it in page.tsx.</li>
</ul>
</li>
</ul>
<h3 id="static-metadata">Static metadata<a aria-hidden="true" class="anchor-heading icon-link" href="#static-metadata"></a></h3>
<pre class="language-tsx"><code class="language-tsx"><span class="token keyword module">export</span> <span class="token keyword">const</span> metadata <span class="token operator">=</span> <span class="token punctuation">{</span>
title<span class="token operator">:</span> <span class="token string">"Next.js"</span><span class="token punctuation">,</span>
description<span class="token operator">:</span> <span class="token string">"Generated by Next.js"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="dynamic-metadata">Dynamic metadata<a aria-hidden="true" class="anchor-heading icon-link" href="#dynamic-metadata"></a></h3>
<ul>
<li>
<p>when metadata is dependent on dynamic info like current route params, external data or metadata defined in parent segments.</p>
<pre class="language-tsx"><code class="language-tsx">
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Metadata</span><span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">"next"</span>

<span class="token keyword module">export</span> <span class="token keyword">const</span> generateMetadata <span class="token operator">=</span> <span class="token keyword">async</span><span class="token punctuation">(</span><span class="token punctuation">{</span>params<span class="token punctuation">}</span><span class="token operator">:</span> <span class="token maybe-class-name">Props</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token known-class-name class-name">Promise</span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">Metadata</span><span class="token operator">></span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> id<span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword control-flow">await</span> params<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">productId</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Product </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Props</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  params<span class="token operator">:</span> <span class="token known-class-name class-name">Promise</span><span class="token operator">&#x3C;</span><span class="token punctuation">{</span>productId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">}</span><span class="token operator">></span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="title-metadata">Title metadata<a aria-hidden="true" class="anchor-heading icon-link" href="#title-metadata"></a></h2>
<p>The title property in metadata can be defined as :</p>
</li>
<li>
<p>a string</p>
</li>
<li>
<p>an object : it can have 3 keys:</p>
<pre><code>- default
- template
- absolute
</code></pre>
</li>
</ul>
<h3 id="string-title">String title<a aria-hidden="true" class="anchor-heading icon-link" href="#string-title"></a></h3>
<pre class="language-tsx"><code class="language-tsx"><span class="token keyword module">export</span> <span class="token keyword">const</span> metadata <span class="token operator">=</span> <span class="token punctuation">{</span>
title<span class="token operator">:</span> <span class="token string">"Next.js"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="object-title">Object title<a aria-hidden="true" class="anchor-heading icon-link" href="#object-title"></a></h3>
<ul>
<li><strong>default</strong>: the default title is defined in layout.tsx, the children page that does not have a title metadata, defaults to this value.</li>
</ul>
<pre class="language-tsx"><code class="language-tsx">  <span class="token keyword module">export</span> <span class="token keyword">const</span> metadata <span class="token operator">=</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword module">default</span><span class="token operator">:</span> <span class="token string">"Next.js Tutorial"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<ul>
<li><strong>template</strong> : Consistent way of formatting the title. It allows us to have prefix/suffix.
for eg, if the layout.tsx has the following metadata</li>
</ul>
<pre class="language-tsx"><code class="language-tsx">  <span class="token keyword module">export</span> <span class="token keyword">const</span> metadata <span class="token operator">=</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword module">default</span><span class="token operator">:</span> <span class="token string">"Next.js Tutorial"</span><span class="token punctuation">,</span>
    template<span class="token operator">:</span> <span class="token string">"%s | ByteSizedFrontend"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>Now if the children page has title metadata = "Routing", the title in the actual page metadata will come as: <code>Routing | ByteSizedFrontend</code></p>
<ul>
<li><strong>absolute</strong>: to breakthrough the template, use absolute in children route metadata
for eg, if the layout metadata remains same as above and I have the child page.tsx as:</li>
</ul>
<pre class="language-tsx"><code class="language-tsx">  <span class="token keyword module">export</span> <span class="token keyword">const</span> metadata <span class="token operator">=</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token punctuation">{</span>
    absolute<span class="token operator">:</span> <span class="token string">"Routing example"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>The final title would appear as <code>Routing example</code>.</p>